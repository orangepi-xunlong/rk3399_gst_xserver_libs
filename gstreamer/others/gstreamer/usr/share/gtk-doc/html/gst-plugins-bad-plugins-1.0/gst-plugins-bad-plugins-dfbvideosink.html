<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>dfbvideosink: GStreamer Bad Plugins 1.0 Plugins Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="GStreamer Bad Plugins 1.0 Plugins Reference Manual">
<link rel="up" href="ch01.html" title="gst-plugins-bad Elements">
<link rel="prev" href="gst-plugins-bad-plugins-dewarp.html" title="dewarp">
<link rel="next" href="gst-plugins-bad-plugins-diffuse.html" title="diffuse">
<meta name="generator" content="GTK-Doc V1.28 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.object-hierarchy" class="shortcut">Object Hierarchy</a></span><span id="nav_interfaces">  <span class="dim">|</span> 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.implemented-interfaces" class="shortcut">Implemented Interfaces</a></span><span id="nav_properties">  <span class="dim">|</span> 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.properties" class="shortcut">Properties</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="gst-plugins-bad-plugins-dewarp.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="gst-plugins-bad-plugins-diffuse.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="gst-plugins-bad-plugins-dfbvideosink"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="gst-plugins-bad-plugins-dfbvideosink.top_of_page"></a>dfbvideosink</span></h2>
<p>dfbvideosink</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.properties"></a><h2>Properties</h2>
<div class="informaltable"><table class="informaltable" border="0">
<colgroup>
<col width="150px" class="properties_type">
<col width="300px" class="properties_name">
<col width="200px" class="properties_flags">
</colgroup>
<tbody>
<tr>
<td class="property_type"><a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--brightness" title="The “brightness” property">brightness</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type"><a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--contrast" title="The “contrast” property">contrast</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type"><a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--hue" title="The “hue” property">hue</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type">
<a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *</td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--pixel-aspect-ratio" title="The “pixel-aspect-ratio” property">pixel-aspect-ratio</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type"><a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--saturation" title="The “saturation” property">saturation</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type"><a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a></td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title="The “surface” property">surface</a></td>
<td class="property_flags">Write</td>
</tr>
<tr>
<td class="property_type"><a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"><span class="type">gboolean</span></a></td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--vsync" title="The “vsync” property">vsync</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type"><span class="type">GstDfbVideoSinkLayerMode</span></td>
<td class="property_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--layer-mode" title="The “layer-mode” property">layer-mode</a></td>
<td class="property_flags">Read / Write</td>
</tr>
</tbody>
</table></div>
</div>
<a name="GstDfbVideoSink"></a><div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody><tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink-struct" title="struct GstDfbVideoSink">GstDfbVideoSink</a></td>
</tr></tbody>
</table></div>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    <a href="/usr/share/gtk-doc/html/gobject/gobject-The-Base-Object-Type.html#GObject-struct">GObject</a>
    <span class="lineart">╰──</span> <a href="/usr/share/gtk-doc/html/gobject/gobject-The-Base-Object-Type.html#GInitiallyUnowned">GInitiallyUnowned</a>
        <span class="lineart">╰──</span> <a href="/usr/share/gtk-doc/html/gstreamer-1.0/GstObject.html#GstObject-struct">GstObject</a>
            <span class="lineart">╰──</span> <a href="/usr/share/gtk-doc/html/gstreamer-1.0/GstElement.html#GstElement-struct">GstElement</a>
                <span class="lineart">╰──</span> <a href="/usr/share/gtk-doc/html/gstreamer-libs-1.0/GstBaseSink.html#GstBaseSink-struct">GstBaseSink</a>
                    <span class="lineart">╰──</span> <a href="/usr/share/gtk-doc/html/gst-plugins-base-libs-1.0/GstVideoSink.html#GstVideoSink-struct">GstVideoSink</a>
                        <span class="lineart">╰──</span> GstDfbVideoSink
</pre>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.implemented-interfaces"></a><h2>Implemented Interfaces</h2>
<p>
GstDfbVideoSink implements
 <a href="/usr/share/gtk-doc/html/gst-plugins-base-libs-1.0/GstNavigation.html#GstNavigation-struct">GstNavigation</a> and  <a href="/usr/share/gtk-doc/html/gst-plugins-base-libs-1.0/GstColorBalance.html#GstColorBalance-struct">GstColorBalance</a>.</p>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.description"></a><h2>Description</h2>
<p>DfbVideoSink renders video frames using the</p>
<a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> library.
<p>Rendering can happen in two different modes :</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Standalone: this mode will take complete control of the monitor forcing</p>
<a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> to fullscreen layout.
<p>This is convenient to test using the  gst-launch-1.0 command line tool or
other simple applications. It is possible to interrupt playback while
being in this mode by pressing the Escape key.
This mode handles navigation events for every input device supported by
the <a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> library, it will
look for available video modes in the fb.modes file and try to switch
the framebuffer video mode to the most suitable one. Depending on
hardware acceleration capabilities the element will handle scaling or not.
If no acceleration is available it will do clipping or centering of the
video frames respecting the original aspect ratio.</p>
</li>
<li class="listitem">
<p>Embedded: this mode will render video frames in a
<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title="The “surface” property"><span class="type">“surface”</span></a> provided by the
application developer. This is a more advanced usage of the element and
it is required to integrate video playback in existing</p>
<a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> applications.
<p>When using this mode the element just renders to the
<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title="The “surface” property"><span class="type">“surface”</span></a> provided by the
application, that means it won't handle navigation events and won't resize
the <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title="The “surface” property"><span class="type">“surface”</span></a> to fit video
frames geometry. Application has to implement the necessary code to grab
informations about the negotiated geometry and resize there
<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title="The “surface” property"><span class="type">“surface”</span></a> accordingly.</p>
</li>
</ul></div>
<p>For both modes the element implements a buffer pool allocation system to
optimize memory allocation time and handle reverse negotiation. Indeed if
you insert an element like videoscale in the pipeline the video sink will
negotiate with it to try get a scaled video for either the fullscreen layout
or the application provided external <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title="The “surface” property"><span class="type">“surface”</span></a>.</p>
<div class="refsect3">
<a name="id-1.2.61.8.7"></a><h4>Example application</h4>
<pre class="programlisting">

#include &lt;directfb.h&gt;

#ifdef __no_instrument_function__
#undef __no_instrument_function__
#endif

#include &lt;stdio.h&gt;
#include &lt;gst/gst.h&gt;

static IDirectFB *dfb = NULL;
static IDirectFBSurface *primary = NULL;
static GMainLoop *loop;

#define DFBCHECK(x...)                                         \
  {                                                            \
    DFBResult err = x;                                         \
                                                               \
    if (err != DFB_OK)                                         \
      {                                                        \
        fprintf( stderr, "%s &lt;%d&gt;:\n\t", __FILE__, __LINE__ ); \
        DirectFBErrorFatal( #x, err );                         \
      }                                                        \
  }

static gboolean
get_me_out (gpointer data)
{
  g_main_loop_quit (loop);
  return FALSE;
}

int
main (int argc, char *argv[])
{
  DFBSurfaceDescription dsc;
  GstElement *pipeline, *src, *sink;

  /* Init both GStreamer and DirectFB */
  DFBCHECK (DirectFBInit (&amp;argc, &amp;argv));
  gst_init (&amp;argc, &amp;argv);

  /* Creates DirectFB main context and set it to fullscreen layout */
  DFBCHECK (DirectFBCreate (&amp;dfb));
  DFBCHECK (dfb-&gt;SetCooperativeLevel (dfb, DFSCL_FULLSCREEN));

  /* We want a double buffered primary surface */
  dsc.flags = DSDESC_CAPS;
  dsc.caps = DSCAPS_PRIMARY | DSCAPS_FLIPPING;

  DFBCHECK (dfb-&gt;CreateSurface (dfb, &amp;dsc, &amp;primary));

  /* Creating our pipeline : videotestsrc ! dfbvideosink */
  pipeline = gst_pipeline_new (NULL);
  g_assert (pipeline);
  src = gst_element_factory_make ("videotestsrc", NULL);
  g_assert (src);
  sink = gst_element_factory_make ("dfbvideosink", NULL);
  g_assert (sink);
  /* That's the interesting part, giving the primary surface to dfbvideosink */
  g_object_set (sink, "surface", primary, NULL);

  /* Adding elements to the pipeline */
  gst_bin_add_many (GST_BIN (pipeline), src, sink, NULL);
  if (!gst_element_link (src, sink))
    g_error ("Couldn't link videotestsrc and dfbvideosink");

  /* Let's play ! */
  gst_element_set_state (pipeline, GST_STATE_PLAYING);

  /* we need to run a GLib main loop to get out of here */
  loop = g_main_loop_new (NULL, FALSE);
  /* Get us out after 20 seconds */
  g_timeout_add (20000, get_me_out, NULL);
  g_main_loop_run (loop);

  /* Release elements and stop playback */
  gst_element_set_state (pipeline, GST_STATE_NULL);

  /* Free the main loop */
  g_main_loop_unref (loop);

  /* Release DirectFB context and surface */
  primary-&gt;Release (primary);
  dfb-&gt;Release (dfb);

  return 0;
}

</pre>
</div>
<div class="refsect3">
<a name="id-1.2.61.8.8"></a><h4>Example pipelines</h4>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1</pre></td>
        <td class="listing_code"><pre class="programlisting">gst<span class="gtkdoc opt">-</span>launch<span class="gtkdoc opt">-</span><span class="number">1.0</span> <span class="gtkdoc opt">-</span>v videotestsrc <span class="gtkdoc opt">!</span> dfbvideosink hue<span class="gtkdoc opt">=</span><span class="number">20000</span> saturation<span class="gtkdoc opt">=</span><span class="number">40000</span> brightness<span class="gtkdoc opt">=</span><span class="number">25000</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p> test the colorbalance interface implementation in dfbvideosink</p>
</div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<div class="refsect2">
<a name="id-1.2.61.8.9.1"></a><h3>Element Information</h3>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">plugin</span></p></td>
<td>
            <a class="link" href="gst-plugins-bad-plugins-plugin-dfbvideosink.html#plugin-dfbvideosink">dfbvideosink</a>
          </td>
</tr>
<tr>
<td><p><span class="term">author</span></p></td>
<td>Julien Moutte &lt;julien@moutte.net&gt;</td>
</tr>
<tr>
<td><p><span class="term">class</span></p></td>
<td>Sink/Video</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="id-1.2.61.8.9.2"></a><h3>Element Pads</h3>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">name</span></p></td>
<td>sink</td>
</tr>
<tr>
<td><p><span class="term">direction</span></p></td>
<td>sink</td>
</tr>
<tr>
<td><p><span class="term">presence</span></p></td>
<td>always</td>
</tr>
<tr>
<td><p><span class="term">details</span></p></td>
<td>video/x-raw, framerate=(fraction)[ 0/1, 2147483647/1 ], width=(int)[ 1, 2147483647 ], height=(int)[ 1, 2147483647 ]</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.functions_details"></a><h2>Functions</h2>
<p></p>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="GstDfbVideoSink-struct"></a><h3>struct GstDfbVideoSink</h3>
<pre class="programlisting">struct GstDfbVideoSink;</pre>
<p>The opaque <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink"><span class="type">GstDfbVideoSink</span></a> structure.</p>
</div>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-plugins-dfbvideosink.property-details"></a><h2>Property Details</h2>
<div class="refsect2">
<a name="GstDfbVideoSink--brightness"></a><h3>The <code class="literal">“brightness”</code> property</h3>
<pre class="programlisting">  “brightness”               <a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></pre>
<p>The brightness of the video.</p>
<p>Flags: Read / Write</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2">
<a name="GstDfbVideoSink--contrast"></a><h3>The <code class="literal">“contrast”</code> property</h3>
<pre class="programlisting">  “contrast”                 <a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></pre>
<p>The contrast of the video.</p>
<p>Flags: Read / Write</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2">
<a name="GstDfbVideoSink--hue"></a><h3>The <code class="literal">“hue”</code> property</h3>
<pre class="programlisting">  “hue”                      <a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></pre>
<p>The hue of the video.</p>
<p>Flags: Read / Write</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2">
<a name="GstDfbVideoSink--pixel-aspect-ratio"></a><h3>The <code class="literal">“pixel-aspect-ratio”</code> property</h3>
<pre class="programlisting">  “pixel-aspect-ratio”       <a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *</pre>
<p>The pixel aspect ratio of the device.</p>
<p>Flags: Read / Write</p>
<p>Default value: "1/1"</p>
</div>
<hr>
<div class="refsect2">
<a name="GstDfbVideoSink--saturation"></a><h3>The <code class="literal">“saturation”</code> property</h3>
<pre class="programlisting">  “saturation”               <a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"><span class="type">gint</span></a></pre>
<p>The saturation of the video.</p>
<p>Flags: Read / Write</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2">
<a name="GstDfbVideoSink--surface"></a><h3>The <code class="literal">“surface”</code> property</h3>
<pre class="programlisting">  “surface”                  <a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a></pre>
<p>The target surface for video.</p>
<p>Flags: Write</p>
</div>
<hr>
<div class="refsect2">
<a name="GstDfbVideoSink--vsync"></a><h3>The <code class="literal">“vsync”</code> property</h3>
<pre class="programlisting">  “vsync”                    <a href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"><span class="type">gboolean</span></a></pre>
<p>Wait for next vertical sync to draw frames.</p>
<p>Flags: Read / Write</p>
<p>Default value: TRUE</p>
</div>
<hr>
<div class="refsect2">
<a name="GstDfbVideoSink--layer-mode"></a><h3>The <code class="literal">“layer-mode”</code> property</h3>
<pre class="programlisting">  “layer-mode”               <span class="type">GstDfbVideoSinkLayerMode</span></pre>
<p>The cooperative level handling the access permission (set this to 'administrative' when the cursor is required).</p>
<p>Flags: Read / Write</p>
<p>Default value: DLSCL_EXCLUSIVE</p>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.28</div>
</body>
</html>